<div class="page-wrapper">
  <app-header></app-header>

  <div class="container page-content">
    <div class="mx-auto col-8">

      <div class="mb-4">
        <div class="confirm-card shadow-sm p-3 p-md-4 rounded-4 bg-white confirm-card-top-accent">
          <div class="d-flex align-items-center">
            <div class="confirm-icon-circle me-3 d-flex align-items-center justify-content-center">
              <i class="bi bi-send-check fs-4 icon-color"></i>
            </div>
            <div>
              <h4 class="fw-bold mb-1">準備好送出了嗎？</h4>
              <p class="mb-0 text-muted small">
                請再次確認下方資訊。
              </p>
              <p class="mb-0 text-muted small">
                若需修改請點擊<strong>「返回修改」</strong>；確認無誤後請點擊<strong>「確認送出」</strong>。
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="mb-4">
        <div class="mb-3 d-flex align-items-center">
          <i class="bi bi-person-badge fs-4 me-2"></i>
          <h5 class="m-0 fw-bold">基本資料</h5>
        </div>
        <div class="confirm-card shadow-sm p-4 px-md-5 rounded-4 bg-white">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="fw-bold mb-1">姓名</label>
              <div class="confirm-data-box">{{ displayData?.userInfo?.name }}</div>
            </div>
            <div class="col-md-6">
              <label class="fw-bold mb-1">年齡</label>
              <div class="confirm-data-box" ngClass="{{!displayData?.userInfo?.age ? 'confirm-data-empty' : ''}}">
                {{ displayData?.userInfo?.age || '未填寫' }}
              </div>
            </div>
            <div class="col-md-6">
              <label class="fw-bold mb-1">手機</label>
              <div class="confirm-data-box">{{ displayData?.userInfo?.tel }}</div>
            </div>
            <div class="col-md-6">
              <label class="fw-bold mb-1">Email</label>
              <div class="confirm-data-box">{{ displayData?.userInfo?.email }}</div>
            </div>
          </div>
        </div>
      </div>

      <div class="mb-5">
        <div class="mb-3 d-flex align-items-center">
          <i class="bi bi-pencil-square fs-5 me-2"></i>
          <h5 class="m-0 fw-bold">問卷回答</h5>
        </div>
        <div class="confirm-card shadow-sm p-4 px-md-5 rounded-4 bg-white">
          @for (ques of displayData.answers; track $index) {
          <div class="confirm-question-item mb-4 ">
            <h6 class="fw-bold mb-3">
              {{ques.questionID}}. {{ques.questionDescription}}
            </h6>

            @if(ques.questionType == 'single-choice'){
            <div class="confirm-data-box"
              [ngClass]="{ 'confirm-data-empty': !ques.questionAnswer,'confirm-data-highlight':ques.questionAnswer }">
              @if(ques.questionAnswer) {
              <i class="bi bi-check-circle-fill me-2"></i> {{ ques.questionAnswer }}
              } @else {
              未選擇
              }
            </div>
            }

            @if(ques.questionType == 'multiple-choice'){
            <div class="d-flex flex-wrap gap-2 ps-1">
              @if (ques.questionAnswer && ques.questionAnswer.length > 0) {
              @for (checkOption of ques.questionAnswer; track $index) {
              <div class="confirm-answer-tag">{{checkOption}}</div>
              }
              } @else {
              <div class="confirm-data-box confirm-data-empty w-100">未選擇</div>
              }
            </div>
            }


            @if(ques.questionType == 'text'){
            <div class="confirm-data-box confirm-data-multi" [ngClass]="{ 'confirm-data-empty': !ques.questionAnswer }">
              {{ ques.questionAnswer || '未填寫' }}
            </div>
            }

          </div>
          }

          <div class="d-flex justify-content-center gap-3">
            <button type="button"
              class="btn btn-outline-secondary confirm-btn-round rounded-pill px-5 fw-bold border-2 py-2"
              (click)="cancel()">
              返回修改
            </button>
            <button type="button" class="btn confirm-btn-submit rounded-pill px-5 fw-bold py-2 shadow-sm"
              (click)="goSubmit()">
              確認送出
            </button>
          </div>

        </div>
      </div>

      <app-footer></app-footer>
    </div>